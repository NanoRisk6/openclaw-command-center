---
layout: default
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OpenClaw Command Center</title>
<style>
:root { --bg: white; --fg: black; --card: #f0f0f0; --accent: #1da1f2; }
[data-theme="dark"] { --bg: #121212; --fg: white; --card: #1e1e1e; --accent: #1da1f2; }
body { font-family: system-ui; background: var(--bg); color: var(--fg); margin: 0; padding: 1rem; max-width: 600px; margin: auto; }
h1 { text-align: center; }
.metric { background: var(--card); padding: 1rem; margin: 1rem 0; border-radius: 8px; display: grid; gap: 0.5rem; }
.metric h3 { margin: 0; font-size: 1.2rem; }
#tweet-filter { margin-left: 0.5rem; }
.btn { background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
.btn:hover { opacity: 0.9; }
#tweet-text { width: 100%; margin: 1rem 0; padding: 0.5rem; }
.hidden { display: none; }
</style>
</head>
<body>
<h1>OpenClaw Command Center</h1>
<div id="dashboard">
<div class="metric"><h2>SOL: $86.43</h2></div>
<div class="metric"><h2>Pipeline: 6 / 11 OK</h2></div>
<div class="metric"><h2>Treasury: 42% to Target</h2></div>
<div class="metric" id="cron-card">
  <h3>Cron Health</h3>
  <p id="cron-summary">Loading...</p>
</div>
  <div class="metric" id="repo-card">
    <h3>Repo Status</h3>
    <p id="repo-summary">Loading...</p>
  </div>
<div class="metric" id="queue-card">
  <h3>Queue Depth</h3>
  <p id="queue-summary">Loading...</p>
  <label><input type="checkbox" id="tweet-filter"> Tweet* only</label>
</div>
<div class="metric" id="tweet-card">
  <h3>Tweet Log</h3>
  <p id="tweet-summary">Loading...</p>
</div>
<textarea id="tweet-text">SOL $86.43 | Pipeline 6/11 OK | Treasury 42% #SOL #OpenClaw</textarea>
<button onclick="tweet()" class="btn">Tweet Snapshot</button>
<button onclick="toggleDark()" class="btn">üåô Dark Mode</button>
<button onclick="refreshData()" class="btn" id="refresh-btn">üîÑ Refresh</button>
</div>
<script>
let tweetFilter = false;
async function loadData() {
  try {
    const cronRes = await fetch('cron_health.json');
    const cron = await cronRes.json();
    document.getElementById('cron-summary').innerHTML = `${cron.ok}/${cron.total} OK <span style="color:red;">(${cron.errors.length} errors)</span><br>Errors: ${cron.errors.join(', ') || 'none'}`;
  } catch {}
  try {
    const queueRes = await fetch('queue_depth.json');
    const queue = await queueRes.json();
    const active = tweetFilter ? queue.tweetActive : queue.active60min;
    const label = tweetFilter ? 'Tweet*' : 'Active 60m';
    document.getElementById('queue-summary').innerHTML = `Total: ${queue.total}<br>${label}: ${active}<br>Last dequeue: ${queue.lastDequeue}`;
  } catch {}
  try {
    const tweetRes = await fetch('tweet_log.json');
    const tweet = await tweetRes.json();
    document.getElementById('tweet-summary').innerHTML = `Last post: ${tweet.lastPost}<br>Failures: ${tweet.failures}<br>Token expires: ${tweet.tokenExpires}`;
  } catch {}
  // GitHub Repo Status
  try {
    const repoRes = await fetch('https://api.github.com/repos/NanoRisk6/openclaw-command-center');
    const repo = await repoRes.json();
    const prRes = await fetch(repo.pulls_url.replace('{sha}', '?state=open'));
    const prs = await prRes.json();
    const openPRs = Array.isArray(prs) ? prs.length : 0;
    document.getElementById('repo-summary').innerHTML = `Stars: ${repo.stargazers_count || 0}<br>Forks: ${repo.forks_count || 0}<br>Open Issues/PRs: ${repo.open_issues_count || 0}<br>Open PRs: ${openPRs}`;
  } catch {}
}
function toggleTweetFilter() {
  tweetFilter = !tweetFilter;
  loadData();
}
document.getElementById('tweet-filter').addEventListener('change', toggleTweetFilter);
async function refreshData() {
  document.getElementById('refresh-btn').textContent = '‚è≥';
  await loadData();
  document.getElementById('refresh-btn').textContent = 'üîÑ Refresh';
}
setInterval(loadData, 10000);
// Init theme
const theme = localStorage.getItem("theme") || "light";
document.body.dataset.theme = theme;
const darkBtn = document.querySelector("button:nth-last-of-type(2)");
if (darkBtn) darkBtn.textContent = theme === "dark" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
loadData();
function toggleDark() { const isDark = document.body.dataset.theme === "dark"; document.body.dataset.theme = isDark ? "light" : "dark"; localStorage.setItem("theme", document.body.dataset.theme); document.querySelector("#refresh-btn ~ button:last-of-type, button:nth-last-of-type(2)").textContent = document.body.dataset.theme === "dark" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode"; }
function tweet() { const text = document.getElementById("tweet-text").value; window.open("https://twitter.com/intent/tweet?text=" + encodeURIComponent(text)); }
</script>
</body>
</html>